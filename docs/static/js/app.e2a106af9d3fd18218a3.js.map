{"version":3,"sources":["webpack:///static/js/app.e2a106af9d3fd18218a3.js","webpack:///./src/Tile.js","webpack:///./src/components/Map.vue","webpack:///src/components/Cell.vue","webpack:///./src/components/Cell.vue","webpack:///./src/components/Cell.vue?d989","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?38a2","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?66df","webpack:///src/App.vue"],"names":["webpackJsonp","/kt0","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","_class","value","arguments","length","undefined","coord","x","y","this","isNew","oldCoord","key","newCoord","3GDu","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_f0c3cf86_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__","normalizeComponent","__vue_styles__","Component","8Wsr","data","props","tile","type","Object","required","methods","getBackgroudColor","number","computed","position","top","left","background","B1Az","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4dad1472_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__","DW0X","exports","Dqss","render","_vm","_h","$createElement","_c","_self","staticClass","class","new-tile","style","_v","_s","_e","staticRenderFns","esExports","KVUd","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5c0b7b0d_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","Vue","config","productionTip","el","template","components","App","OZYz","e5Iz","attrs","id","fGNU","__WEBPACK_IMPORTED_MODULE_0__Cell_vue__","__WEBPACK_IMPORTED_MODULE_1__Tile_js__","tiles","isOver","score","isMove","created","init","mounted","document","onkeydown","onKeyDown","i","push","j","$set","generateRandom","space","r","c","randomIndex","Math","floor","random","randomValue","_r","event","keyCode","move","refreshTiles","max","refreshCoord","rotateLeft","matrix","rows","columns","res","row","column","direction","moveLeft","_i","_i2","isDefeat","filter","newRow","cell","shift","currentY","equals","oldRow","defeat","direct","aroundX","aroundY","Cell","h8EM","_l","directives","name","rawName","expression","on","click","$event","xJD8","__WEBPACK_IMPORTED_MODULE_0__components_Map__","Map"],"mappings":"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","file":"static/js/app.e2a106af9d3fd18218a3.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/kt0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n\n\n\n/**\n * Created by feng on 17-11-6.\n */\nvar _class = function () {\n  function _class() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var coord = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { x: 0, y: 0 };\n\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n    this.value = value; // 当前显示的值\n    this.coord = { // 当前的坐标值\n      x: coord.x,\n      y: coord.y // 动画过渡 translate\n    };this.isNew = false; // 判断是不是新格子 新格子应该有 scale 动画\n    this.oldCoord = { x: this.coord.x, y: this.coord.y };\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(_class, [{\n    key: \"refreshCoord\",\n    value: function refreshCoord(newCoord) {\n      this.isNew = false;\n      this.oldCoord.x = this.coord.x;\n      this.oldCoord.y = this.coord.y;\n      this.coord.x = newCoord.x;\n      this.coord.y = newCoord.y;\n    }\n  }]);\n\n  return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ \"3GDu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__ = __webpack_require__(\"fGNU\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_f0c3cf86_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__ = __webpack_require__(\"h8EM\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"KVUd\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f0c3cf86\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_f0c3cf86_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"8Wsr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {};\n  },\n\n  props: {\n    tile: {\n      type: Object,\n      required: true\n    }\n  },\n  methods: {\n    getBackgroudColor: function getBackgroudColor(number) {\n      switch (number) {\n        case 0:\n          return 'rgba(238, 228, 218, 0.35)';\n        case 2:\n          return '#eee4da';\n        case 4:\n          return '#ede0c8';\n        case 8:\n          return '#f2b179';\n        case 16:\n          return '#f59563';\n        case 32:\n          return '#f67c5f';\n        case 64:\n          return '#f65e3b';\n        case 128:\n          return '#edcf72';\n        case 256:\n          return '#edcc61';\n        case 512:\n          return '#edc850';\n        case 1024:\n          return '#edc53f';\n        case 2048:\n          return '#edc22e';\n      }\n    }\n  },\n  computed: {\n    position: function position() {\n      return {\n        top: this.tile.coord.x * 100 + (this.tile.coord.x + 1) * 10 + 'px',\n        left: this.tile.coord.y * 100 + (this.tile.coord.y + 1) * 10 + 'px',\n        background: this.getBackgroudColor(this.tile.value)\n      };\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"B1Az\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__ = __webpack_require__(\"8Wsr\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4dad1472_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__ = __webpack_require__(\"Dqss\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"OZYz\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4dad1472\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4dad1472_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"DW0X\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"Dqss\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cell\",class:{'new-tile': _vm.tile.isNew},style:(_vm.position)},[(_vm.tile.value != 0)?_c('span',[_vm._v(_vm._s(_vm.tile.value))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"KVUd\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5c0b7b0d_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"e5Iz\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"DW0X\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5c0b7b0d_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */] }\n});\n\n/***/ }),\n\n/***/ \"OZYz\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"e5Iz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"fGNU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Cell_vue__ = __webpack_require__(\"B1Az\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Tile_js__ = __webpack_require__(\"/kt0\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      tiles: [],\n      isOver: false,\n      score: 0,\n      isMove: false\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  mounted: function mounted() {\n    document.onkeydown = this.onKeyDown;\n  },\n\n  methods: {\n    init: function init() {\n      this.isOver = false;\n      this.tiles = [];\n      for (var i = 0; i < 4; i++) {\n        this.tiles.push([]);\n        for (var j = 0; j < 4; j++) {\n          this.tiles[i].push(new __WEBPACK_IMPORTED_MODULE_1__Tile_js__[\"a\" /* default */](0, { x: i, y: j }));\n          this.$set(this.tiles, i, this.tiles[i]);\n        }\n      }\n      this.generateRandom();\n    },\n    generateRandom: function generateRandom() {\n      var space = [];\n      for (var r = 0; r < 4; r++) {\n        for (var c = 0; c < 4; c++) {\n          if (this.tiles[r][c].value === 0) {\n            space.push({ r: r, c: c });\n          }\n        }\n      }\n      if (space.length > 0) {\n        var randomIndex = Math.floor(Math.random() * space.length);\n        var randomValue = Math.random() > 0.5 ? 2 : 4;\n        var _r = space[randomIndex].r;\n        var _c = space[randomIndex].c;\n        /* 二维数组的更新方式只能是更新整个一维数组 */\n        this.tiles[_r][_c].value = randomValue;\n        this.tiles[_r][_c].isNew = true;\n        this.$set(this.tiles, _r, this.tiles[_r]);\n        if (!this.score) {\n          this.score = randomValue;\n        }\n      }\n    },\n    onKeyDown: function onKeyDown(event) {\n      /** keyCode 37 == Left  38 == Up 39 == Right 40 == Down */\n      if (event.keyCode >= 37 && event.keyCode <= 40) {\n        this.move(event.keyCode - 37);\n      }\n    },\n    refreshTiles: function refreshTiles() {\n      for (var r = 0; r < 4; r++) {\n        for (var c = 0; c < 4; c++) {\n          this.score = Math.max(this.score, this.tiles[r][c].value);\n          this.tiles[r][c].refreshCoord({ x: r, y: c });\n        }\n      }\n    },\n\n    /**\n     * rotate 逆时针旋转 纯粹数学规律\n     * n维矩阵旋转,假设矩阵中一数字坐标为(i,j)，逆时针翻转后的坐标为(n-1-j,i)\n     * 原矩阵\n     * (0,0) (0,1) (0,2) (0,3)\n     * (1,0) (1,1) (1,2) (1,3)\n     * (2,0) (2,1) (2,2) (2,3)\n     * (3,0) (3,1) (3,2) (3,3)\n     * 逆时针旋转90度后坐标变化\n     * (0,3) (1,3) (2,3) (3,3)\n     * (0,2) (1,2) (2,2) (3,2)\n     * (0,1) (1,1) (2,1) (3,1)\n     * (0,0) (1,0) (2,0) (3,0)\n     */\n    rotateLeft: function rotateLeft(matrix) {\n      var rows = matrix.length;\n      var columns = matrix[0].length;\n      var res = [];\n      for (var row = 0; row < rows; row++) {\n        res.push([]);\n        for (var column = 0; column < columns; column++) {\n          res[row][column] = matrix[column][columns - row - 1]; // 计算变化后的坐标\n        }\n      }\n      return res;\n    },\n\n    /** 游戏移动实现规则:\n     * 先将地图向左旋转,\n     * 然后进行合并操作,\n     * 再旋转回来,\n     * 生成新的单元格\n     * */\n    move: function move(direction) {\n      if (direction === 0) {\n        this.moveLeft();\n      } else {\n        for (var i = 0; i < direction; i++) {\n          this.tiles = this.rotateLeft(this.tiles);\n        }\n        this.moveLeft();\n        for (var _i = 0; _i < 4 - direction; _i++) {\n          this.tiles = this.rotateLeft(this.tiles);\n        }\n      }\n      this.refreshTiles();\n      for (var _i2 = 0; _i2 < 4; _i2++) {\n        this.$set(this.tiles, _i2, this.tiles[_i2]);\n      }\n      // 如果有移动才生成新格子\n      if (this.isMove) {\n        this.generateRandom();\n      }\n      if (this.isDefeat()) {\n        this.isOver = true;\n      }\n    },\n\n    /**\n     * 向左移动游戏规则:\n     * 清除所有的空白格子后,\n     * 当左边的格子等于右边的格子,\n     * 合并,\n     * 最后当剩下的有数字的格子都操作完毕后,\n     * 填充补足4个单元格,\n     * */\n    moveLeft: function moveLeft() {\n      this.isMove = false;\n      for (var r = 0; r < 4; r++) {\n        var row = this.tiles[r].filter(function (tile) {\n          return tile.value !== 0;\n        });\n        var newRow = [];\n        while (row.length > 0) {\n          var cell = row.shift();\n          if (row.length > 0 && cell.value === row[0].value) {\n            cell.value += row.shift().value || 0;\n          }\n          newRow.push(cell);\n        }\n        if (newRow.length < 4) {\n          for (var currentY = newRow.length; currentY < 4; currentY++) {\n            newRow.push(new __WEBPACK_IMPORTED_MODULE_1__Tile_js__[\"a\" /* default */]());\n          }\n        }\n        this.isMove = this.isMove ? this.isMove : !this.equals(this.tiles[r], newRow);\n        this.tiles[r] = newRow;\n      }\n    },\n\n    /**\n     * 比较新旧两行格子是否一致\n     */\n    equals: function equals(oldRow, newRow) {\n      if (oldRow.length !== newRow.length) {\n        return false;\n      }\n      for (var i = 0; i < newRow.length; i++) {\n        if (newRow[i].value !== oldRow[i].value) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     * 判断是否失败的规则,\n     * 假如还有空白格子,\n     * 或者xx格子的数值和周围上 下 左 右的格子值相等,\n     * 则还没有输\n     */\n    isDefeat: function isDefeat() {\n      var defeat = false;\n      // 上 下 左 右\n      var x = [-1, 1, 0, 0];\n      var y = [0, 0, -1, 1];\n      for (var r = 0; r < 4; r++) {\n        // 用 |= 的好处: 这里只需要满足以上任意规则则游戏没有输, 因此当任意规则为true, 则defeat一直为true\n        defeat |= this.tiles[r].filter(function (tile) {\n          return tile.value !== 0;\n        }).length !== 4;\n        if (defeat) {\n          // 如果当前行去掉空格子后不为4个格子,则说明有空格\n          break;\n        }\n        for (var c = 0; c < 4; c++) {\n          for (var direct = 0; direct < 4; direct++) {\n            var aroundX = r + x[direct];\n            var aroundY = c + y[direct];\n            // 判断当前this.tiles[r+x[direct]][c+[direct]]的格子存在\n            if (aroundX >= 0 && aroundY >= 0 && aroundX < 4 && aroundY < 4) {\n              defeat |= this.tiles[r][c].value === this.tiles[aroundX][aroundY].value;\n            }\n          }\n        }\n      }\n      return !defeat;\n    }\n  },\n\n  components: {\n    Cell: __WEBPACK_IMPORTED_MODULE_0__Cell_vue__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"h8EM\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game\"},[_c('div',{staticClass:\"map\"},[_vm._l((_vm.tiles[0]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[1]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[2]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[3]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOver),expression:\"isOver\"}],staticClass:\"gameover\"},[_c('div',{staticClass:\"again\"},[_c('p',{staticClass:\"show-over\"},[_vm._v(\"GAME OVER\")]),_vm._v(\" \"),_c('button',{staticClass:\"try-again\",on:{\"click\":function($event){_vm.init()}}},[_vm._v(\"Try Again\")])])])],2),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(\"\\n    max: \"+_vm._s(_vm.score)+\"\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Map__ = __webpack_require__(\"3GDu\");\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app',\n  components: {\n    Map: __WEBPACK_IMPORTED_MODULE_0__components_Map__[\"a\" /* default */]\n  }\n});\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.e2a106af9d3fd18218a3.js","/**\n * Created by feng on 17-11-6.\n */\nexport default class {\n  constructor (value = 0, coord = {x: 0, y: 0}) {\n    this.value = value// 当前显示的值\n    this.coord = {// 当前的坐标值\n      x: coord.x,\n      y: coord.y\n    } // 动画过渡 translate\n    this.isNew = false // 判断是不是新格子 新格子应该有 scale 动画\n    this.oldCoord = {x: this.coord.x, y: this.coord.y}\n  }\n\n  refreshCoord (newCoord) {\n    this.isNew = false\n    this.oldCoord.x = this.coord.x\n    this.oldCoord.y = this.coord.y\n    this.coord.x = newCoord.x\n    this.coord.y = newCoord.y\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tile.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f0c3cf86\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Map.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f0c3cf86\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f0c3cf86\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Map.vue\n// module id = 3GDu\n// module chunks = 1","<template>\n  <div class=\"cell\" v-bind:class=\"{'new-tile': tile.isNew}\" v-bind:style=\"position\">\n    <span v-if=\"tile.value != 0\">{{ tile.value }}</span>\n  </div>\n</template>\n\n<script>\n  export default{\n    data () {\n      return {\n      }\n    },\n    props: {\n      tile: {\n        type: Object,\n        required: true\n      }\n    },\n    methods: {\n      getBackgroudColor (number) {\n        switch (number) {\n          case 0:return 'rgba(238, 228, 218, 0.35)'\n          case 2:return '#eee4da'\n          case 4:return '#ede0c8'\n          case 8:return '#f2b179'\n          case 16:return '#f59563'\n          case 32:return '#f67c5f'\n          case 64:return '#f65e3b'\n          case 128:return '#edcf72'\n          case 256:return '#edcc61'\n          case 512:return '#edc850'\n          case 1024:return '#edc53f'\n          case 2048:return '#edc22e'\n        }\n      }\n    },\n    computed: {\n      position: function () {\n        return {\n          top: this.tile.coord.x * 100 + (this.tile.coord.x + 1) * 10 + 'px',\n          left: this.tile.coord.y * 100 + (this.tile.coord.y + 1) * 10 + 'px',\n          background: this.getBackgroudColor(this.tile.value)\n        }\n      }\n    }\n  }\n</script>\n\n\n<style scoped>\n  .cell {\n    transition: 100ms ease-in;\n    font-size: 45px;\n    position: absolute;\n    text-align: center;\n    display: inline-block;\n    line-height: 100px;\n    margin: 5px;\n    width: 100px;\n    height: 100px;\n    border-radius: 10px;\n    color: #49390d;\n    /*margin: 5px;*/\n  }\n  .new-tile {\n    animation-duration: 200ms;\n    animation-name: emerge;\n    animation-delay: 100ms;\n  }\n  @keyframes emerge {\n    from{transform: scale(0.4)}\n    to{transform: scale(1)}\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Cell.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4dad1472\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cell.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cell.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cell.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4dad1472\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cell.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4dad1472\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Cell.vue\n// module id = B1Az\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cell\",class:{'new-tile': _vm.tile.isNew},style:(_vm.position)},[(_vm.tile.value != 0)?_c('span',[_vm._v(_vm._s(_vm.tile.value))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4dad1472\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Cell.vue\n// module id = Dqss\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c0b7b0d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c0b7b0d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c0b7b0d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = e5Iz\n// module chunks = 1","<template>\n\n  <div class=\"game\">\n    <div class=\"map\">\n      <cell :tile=\"tile\" v-for=\"tile in tiles[0]\"></cell>\n      <cell :tile=\"tile\" v-for=\"tile in tiles[1]\"></cell>\n      <cell :tile=\"tile\" v-for=\"tile in tiles[2]\"></cell>\n      <cell :tile=\"tile\" v-for=\"tile in tiles[3]\"></cell>\n      <div class=\"gameover\" v-show=\"isOver\">\n        <div class=\"again\">\n          <p class=\"show-over\">GAME OVER</p>\n          <button v-on:click=\"init()\" class=\"try-again\">Try Again</button>\n        </div>\n      </div>\n    </div>\n    <div class=\"score\">\n      max: {{ score }}\n    </div>\n\n  </div>\n</template>\n\n<script>\n  import Cell from './Cell.vue'\n  import Tile from '../Tile.js'\n  export default{\n    data () {\n      return {\n        tiles: [],\n        isOver: false,\n        score: 0,\n        isMove: false\n      }\n    },\n    created () {\n      this.init()\n    },\n    mounted () {\n      document.onkeydown = this.onKeyDown\n    },\n    methods: {\n      init () {\n        this.isOver = false\n        this.tiles = []\n        for (let i = 0; i < 4; i++) {\n          this.tiles.push([])\n          for (let j = 0; j < 4; j++) {\n            this.tiles[i].push(new Tile(0, {x: i, y: j}))\n            this.$set(this.tiles, i, this.tiles[i])\n          }\n        }\n        this.generateRandom()\n      },\n      generateRandom () {\n        let space = []\n        for (let r = 0; r < 4; r++) {\n          for (let c = 0; c < 4; c++) {\n            if (this.tiles[r][c].value === 0) {\n              space.push({r: r, c: c})\n            }\n          }\n        }\n        if (space.length > 0) {\n          let randomIndex = Math.floor(Math.random() * space.length)\n          let randomValue = Math.random() > 0.5 ? 2 : 4\n          let r = space[randomIndex].r\n          let c = space[randomIndex].c\n          /* 二维数组的更新方式只能是更新整个一维数组 */\n          this.tiles[r][c].value = randomValue\n          this.tiles[r][c].isNew = true\n          this.$set(this.tiles, r, this.tiles[r])\n          if (!this.score) {\n            this.score = randomValue\n          }\n        }\n      },\n      onKeyDown (event) {\n        /** keyCode 37 == Left  38 == Up 39 == Right 40 == Down */\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n          this.move(event.keyCode - 37)\n        }\n      },\n      refreshTiles () {\n        for (let r = 0; r < 4; r++) {\n          for (let c = 0; c < 4; c++) {\n            this.score = Math.max(this.score, this.tiles[r][c].value)\n            this.tiles[r][c].refreshCoord({x: r, y: c})\n          }\n        }\n      },\n      /**\n       * rotate 逆时针旋转 纯粹数学规律\n       * n维矩阵旋转,假设矩阵中一数字坐标为(i,j)，逆时针翻转后的坐标为(n-1-j,i)\n       * 原矩阵\n       * (0,0) (0,1) (0,2) (0,3)\n       * (1,0) (1,1) (1,2) (1,3)\n       * (2,0) (2,1) (2,2) (2,3)\n       * (3,0) (3,1) (3,2) (3,3)\n       * 逆时针旋转90度后坐标变化\n       * (0,3) (1,3) (2,3) (3,3)\n       * (0,2) (1,2) (2,2) (3,2)\n       * (0,1) (1,1) (2,1) (3,1)\n       * (0,0) (1,0) (2,0) (3,0)\n       */\n      rotateLeft (matrix) {\n        let rows = matrix.length\n        let columns = matrix[0].length\n        let res = []\n        for (let row = 0; row < rows; row++) {\n          res.push([])\n          for (let column = 0; column < columns; column++) {\n            res[row][column] = matrix[column][columns - row - 1]// 计算变化后的坐标\n          }\n        }\n        return res\n      },\n      /** 游戏移动实现规则:\n       * 先将地图向左旋转,\n       * 然后进行合并操作,\n       * 再旋转回来,\n       * 生成新的单元格\n       * */\n      move (direction) {\n        if (direction === 0) {\n          this.moveLeft()\n        } else {\n          for (let i = 0; i < direction; i++) {\n            this.tiles = this.rotateLeft(this.tiles)\n          }\n          this.moveLeft()\n          for (let i = 0; i < 4 - direction; i++) {\n            this.tiles = this.rotateLeft(this.tiles)\n          }\n        }\n        this.refreshTiles()\n        for (let i = 0; i < 4; i++) {\n          this.$set(this.tiles, i, this.tiles[i])\n        }\n        // 如果有移动才生成新格子\n        if (this.isMove) {\n          this.generateRandom()\n        }\n        if (this.isDefeat()) {\n          this.isOver = true\n        }\n      },\n      /**\n       * 向左移动游戏规则:\n       * 清除所有的空白格子后,\n       * 当左边的格子等于右边的格子,\n       * 合并,\n       * 最后当剩下的有数字的格子都操作完毕后,\n       * 填充补足4个单元格,\n       * */\n      moveLeft () {\n        this.isMove = false\n        for (let r = 0; r < 4; r++) {\n          let row = this.tiles[r].filter(tile => (tile.value !== 0))\n          let newRow = []\n          while (row.length > 0) {\n            let cell = row.shift()\n            if (row.length > 0 && cell.value === row[0].value) {\n              cell.value += row.shift().value || 0\n            }\n            newRow.push(cell)\n          }\n          if (newRow.length < 4) {\n            for (let currentY = newRow.length; currentY < 4; currentY++) {\n              newRow.push(new Tile())\n            }\n          }\n          this.isMove = this.isMove ? this.isMove : !this.equals(this.tiles[r], newRow)\n          this.tiles[r] = newRow\n        }\n      },\n      /**\n       * 比较新旧两行格子是否一致\n       */\n      equals (oldRow, newRow) {\n        if (oldRow.length !== newRow.length) {\n          return false\n        }\n        for (let i = 0; i < newRow.length; i++) {\n          if (newRow[i].value !== oldRow[i].value) {\n            return false\n          }\n        }\n        return true\n      },\n      /**\n       * 判断是否失败的规则,\n       * 假如还有空白格子,\n       * 或者xx格子的数值和周围上 下 左 右的格子值相等,\n       * 则还没有输\n       */\n      isDefeat () {\n        let defeat = false\n        // 上 下 左 右\n        let x = [-1, 1, 0, 0]\n        let y = [0, 0, -1, 1]\n        for (let r = 0; r < 4; r++) {\n          // 用 |= 的好处: 这里只需要满足以上任意规则则游戏没有输, 因此当任意规则为true, 则defeat一直为true\n          defeat |= (this.tiles[r].filter(tile => tile.value !== 0).length !== 4)\n          if (defeat) { // 如果当前行去掉空格子后不为4个格子,则说明有空格\n            break\n          }\n          for (let c = 0; c < 4; c++) {\n            for (let direct = 0; direct < 4; direct++) {\n              let aroundX = r + x[direct]\n              let aroundY = c + y[direct]\n              // 判断当前this.tiles[r+x[direct]][c+[direct]]的格子存在\n              if (aroundX >= 0 && aroundY >= 0 && aroundX < 4 && aroundY < 4) {\n                defeat |= (this.tiles[r][c].value === this.tiles[aroundX][aroundY].value)\n              }\n            }\n          }\n        }\n        return !defeat\n      }\n    },\n\n    components: {\n      Cell\n    }\n  }\n</script>\n\n<style scoped>\n  .game {\n    width: 460px;\n    height: 560px;\n\n    /**  div居中,\n    * 当设置width一定,margin 为 auto,\n    * 减去 top left right botton的值后,\n    * 剩下的的边距自动作为两边的左右边距,上下边距,\n    * 并且此时div的父元素是body,所以是全局居中\n    */\n    position: absolute;\n    margin: auto;\n    top: 0; left: 0; right: 0; bottom: 0;\n\n    /*弹性盒子的方式居中*/\n    /*display: flex;*/\n    /*justify-content: center;*/\n\n  }\n\n  .score {\n    width: 450px;\n    height: 100px;\n\n    text-align: center;\n    font-size: 6em;\n  }\n\n  .map {\n    width: 460px;\n    height: 460px;\n    background-color: #baa;\n    border-radius: 20px;\n\n    /*border-bottom: 5px;*/\n    /*border-top: 5px;*/\n  }\n  .gameover {\n    position: relative;\n    width: 460px;\n    height: 460px;\n    background-color: rgba(0, 191, 255, 0.4);\n    border-radius: 20px;\n  }\n  .again {\n    position: absolute;\n    margin: auto;\n    top: 0; left: 0; right: 0; bottom: 0;\n    width: auto;\n    height: 200px;\n    display: inline-block;\n    text-align: center;\n  }\n  .show-over {\n    font-size: 36px;\n    color: coral;\n    font-weight: bold;\n  }\n  .try-again {\n    font-size: 20px;\n    border-radius: 5px;\n    background-color: #876;\n    color: white;\n    border: 0;\n    width: 200px;\n    height: 50px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game\"},[_c('div',{staticClass:\"map\"},[_vm._l((_vm.tiles[0]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[1]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[2]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[3]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOver),expression:\"isOver\"}],staticClass:\"gameover\"},[_c('div',{staticClass:\"again\"},[_c('p',{staticClass:\"show-over\"},[_vm._v(\"GAME OVER\")]),_vm._v(\" \"),_c('button',{staticClass:\"try-again\",on:{\"click\":function($event){_vm.init()}}},[_vm._v(\"Try Again\")])])])],2),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(\"\\n    max: \"+_vm._s(_vm.score)+\"\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f0c3cf86\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Map.vue\n// module id = h8EM\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <Map/>\n  </div>\n</template>\n\n<script>\nimport Map from './components/Map'\n\nexport default {\n  name: 'app',\n  components: {\n    Map\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  /*margin-top: 60px;*/\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}