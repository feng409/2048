{"version":3,"sources":["webpack:///static/js/app.0d53ffec5b83c39c3194.js","webpack:///./src/Tile.js","webpack:///./src/components/Map.vue","webpack:///./src/App.vue?d5ac","webpack:///./src/components/Map.vue?70ff","webpack:///src/components/Cell.vue","webpack:///./src/components/Cell.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/Cell.vue?53c0","webpack:///src/components/Map.vue","webpack:///src/App.vue"],"names":["webpackJsonp","/kt0","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","_class","value","arguments","length","undefined","coord","x","y","this","isNew","oldCoord","key","newCoord","3GDu","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3365b6d6_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__","normalizeComponent","__vue_styles__","Component","6QSp","render","_vm","_h","$createElement","_c","_self","attrs","id","staticRenderFns","esExports","6TGB","staticClass","_l","tiles","tile","_v","directives","name","rawName","expression","on","click","$event","init","8Wsr","data","props","type","Object","required","methods","getBackgroudColor","number","computed","position","top","left","background","watch","B1Az","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0ad82b50_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__","GeGc","exports","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_8a4d6004_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","config","productionTip","el","template","components","App","U2ii","X4Vl","class","new-tile","style","_s","_e","dvRs","fGNU","__WEBPACK_IMPORTED_MODULE_0__Cell_vue__","__WEBPACK_IMPORTED_MODULE_1__Tile_js__","isOver","created","mounted","document","onkeydown","onKeyDown","i","push","j","$set","generateRandom","space","r","c","randomIndex","Math","floor","random","randomValue","_r","event","keyCode","move","refreshTiles","refreshCoord","rotateLeft","matrix","rows","columns","res","row","column","direction","moveLeft","_i","_i2","isDefeat","filter","newRow","cell","shift","currentY","defeat","direct","aroundX","aroundY","Cell","xJD8","__WEBPACK_IMPORTED_MODULE_0__components_Map__","Map"],"mappings":"AAAAA,cAAc,IAERC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACqB,IAAIC,GAAqED,EAAoB,QACzFE,EAA6EF,EAAoBG,EAAEF,GACnGG,EAAkEJ,EAAoB,QACtFK,EAA0EL,EAAoBG,EAAEC,GAOrHE,EAAS,WCZX,QAAAA,KAA8C,GAAjCC,GAAiCC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,GAAzB,EAAGG,EAAsBH,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,IAAbI,EAAG,EAAGC,EAAG,EAAIX,KAAAY,KAAAR,GAC5CQ,KAAKP,MAAQA,EACbO,KAAKH,OACHC,EAAGD,EAAMC,EACTC,EAAGF,EAAME,GAEXC,KAAKC,OAAQ,EACbD,KAAKE,UAAYJ,EAAGE,KAAKH,MAAMC,EAAGC,EAAGC,KAAKH,MAAME,GD+BlD,MAXAR,KAA0EC,IACxEW,IAAK,eACLV,MAAO,SCnBKW,GACZJ,KAAKC,OAAQ,EACbD,KAAKE,SAASJ,EAAIE,KAAKH,MAAMC,EAC7BE,KAAKE,SAASH,EAAIC,KAAKH,MAAME,EAC7BC,KAAKH,MAAMC,EAAIM,EAASN,EACxBE,KAAKH,MAAME,EAAIK,EAASL,MDuBnBP,IAGoBP,GAAuB,EAAI,GAIlDoB,OACA,SAAUrB,EAAQC,EAAqBC,GAE7C,YEpDA,SAAAoB,GAAAC,GACArB,EAAA,QFoDqB,GAAIsB,GAA+GtB,EAAoB,QErD5JuB,EAAAvB,EAAA,QAGAwB,EAAAxB,EAAA,QAQAyB,EAAAL,EAKAM,EAAAF,EACAF,EAAA,EACAC,EAAA,GATA,EAWAE,EAPA,kBAEA,KAUA1B,GAAA,EAAA2B,EAAA,SF4DMC,OACA,SAAU7B,EAAQC,EAAqBC,GAE7C,YGxFA,IAAA4B,GAAA,WAA0B,GAAAC,GAAAf,KAAagB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,YAC7HI,KACAC,GAAiBT,SAAAQ,kBACjBrC,GAAA,KH6FMuC,OACA,SAAUxC,EAAQC,EAAqBC,GAE7C,YInGA,IAAA4B,GAAA,WAA0B,GAAAC,GAAAf,KAAagB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBO,YAAA,QAAkBV,EAAAW,GAAAX,EAAAY,MAAA,YAAAC,GAAuC,MAAAV,GAAA,QAAkBE,OAAOQ,YAAeb,EAAAc,GAAA,KAAAd,EAAAW,GAAAX,EAAAY,MAAA,YAAAC,GAAmD,MAAAV,GAAA,QAAkBE,OAAOQ,YAAeb,EAAAc,GAAA,KAAAd,EAAAW,GAAAX,EAAAY,MAAA,YAAAC,GAAmD,MAAAV,GAAA,QAAkBE,OAAOQ,YAAeb,EAAAc,GAAA,KAAAd,EAAAW,GAAAX,EAAAY,MAAA,YAAAC,GAAmD,MAAAV,GAAA,QAAkBE,OAAOQ,YAAeb,EAAAc,GAAA,KAAAX,EAAA,OAAwBY,aAAaC,KAAA,OAAAC,QAAA,SAAAvC,MAAAsB,EAAA,OAAAkB,WAAA,WAAoER,YAAA,aAAyBP,EAAA,OAAYO,YAAA,UAAoBP,EAAA,KAAUO,YAAA,cAAwBV,EAAAc,GAAA,eAAAd,EAAAc,GAAA,KAAAX,EAAA,UAAiDO,YAAA,YAAAS,IAA4BC,MAAA,SAAAC,GAAyBrB,EAAAsB,WAAatB,EAAAc,GAAA,wBACnxBP,KACAC,GAAiBT,SAAAQ,kBACjBrC,GAAA,KJwGMqD,OACA,SAAUtD,EAAQC,EAAqBC,GAE7C,YAQ6BD,GAAuB,GAClDsD,KAAM,WACJ,UAGFC,OACEZ,MACEa,KK9GNC,OL+GMC,UK5GN,IL+GEC,SACEC,kBAAmB,SAA2BC,GAC5C,OK9GNA,GL+GQ,IAAK,GACH,MK/GV,2BLgHQ,KAAK,GACH,MKhHV,SLiHQ,KAAK,GACH,MKjHV,SLkHQ,KAAK,GACH,MKlHV,SLmHQ,KAAK,IACH,MKnHV,SLoHQ,KAAK,IACH,MKpHV,SLqHQ,KAAK,IACH,MKrHV,SLsHQ,KAAK,KACH,MKtHV,SLuHQ,KAAK,KACH,MKvHV,SLwHQ,KAAK,KACH,MKxHV,SLyHQ,KAAK,MACH,MKzHV,SL0HQ,KAAK,MACH,MKzHV,aL6HEC,UACEC,SAAU,WACR,OACEC,IAAyB,IAApBjD,KAAK4B,KAAK/B,MAAMC,EAAoC,IAAzBE,KAAK4B,KAAK/B,MAAMC,EAAI,GK1H5D,KL2HQoD,KAA0B,IAApBlD,KAAK4B,KAAK/B,MAAME,EAAoC,IAAzBC,KAAK4B,KAAK/B,MAAME,EAAI,GK1H7D,KL2HQoD,WAAYnD,KAAK6C,kBAAkB7C,KAAK4B,KKzHhDnC,UL6HE2D,WAaIC,KACA,SAAUrE,EAAQC,EAAqBC,GAE7C,YMxLA,SAAAoB,GAAAC,GACArB,EAAA,QNwLqB,GAAIoE,GAAgHpE,EAAoB,QMzL7JqE,EAAArE,EAAA,QAGAwB,EAAAxB,EAAA,QAQAyB,EAAAL,EAKAM,EAAAF,EACA4C,EAAA,EACAC,EAAA,GATA,EAWA5C,EAPA,kBAEA,KAUA1B,GAAA,EAAA2B,EAAA,SNgMM4C,KACA,SAAUxE,EAAQyE,KAMlBC,KACA,SAAU1E,EAAQC,EAAqBC,GAE7C,YOnOA,SAAAoB,GAAAC,GACArB,EAAA,QPmOqB,GAAIyE,GAA+GzE,EAAoB,QOpO5J0E,EAAA1E,EAAA,QAGAwB,EAAAxB,EAAA,QAQAyB,EAAAL,EAKAM,EAAAF,EACAiD,EAAA,EACAC,EAAA,GATA,EAWAjD,EAPA,KAEA,KAUA1B,GAAA,EAAA2B,EAAA,SP2OMiD,KACA,SAAU7E,EAAQC,EAAqBC,GAE7C,YACAwD,QAAOoB,eAAe7E,EAAqB,cAAgBQ,OAAO,GAC7C,IAAIsE,GAAoC7E,EAAoB,QQzQjF8E,EAAA9E,EAAA,OAKA6E,GAAA,EAAIE,OAAOC,eAAgB,EAG3B,GAAIH,GAAA,GACFI,GAAI,OACJC,SAAU,SACVC,YAAcC,IAAAN,EAAA,MRgRVO,KACA,SAAUvF,EAAQyE,KAMlBe,KACA,SAAUxF,EAAQC,EAAqBC,GAE7C,YSrSA,IAAA4B,GAAA,WAA0B,GAAAC,GAAAf,KAAagB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBO,YAAA,OAAAgD,OAA0BC,WAAA3D,EAAAa,KAAA3B,OAA2B0E,MAAA5D,EAAA,WAAsB,GAAAA,EAAAa,KAAAnC,MAAAyB,EAAA,QAAAH,EAAAc,GAAAd,EAAA6D,GAAA7D,EAAAa,KAAAnC,UAAAsB,EAAA8D,QACrLvD,KACAC,GAAiBT,SAAAQ,kBACjBrC,GAAA,KT0SM6F,KACA,SAAU9F,EAAQyE,KAMlBsB,KACA,SAAU/F,EAAQC,EAAqBC,GAE7C,YACqB,IAAI8F,GAA0C9F,EAAoB,QAC9D+F,EAAyC/F,EAAoB,OUvStFD,GAAA,GV2TEsD,KAAM,WACJ,OACEZ,SACAuD,QUxTN,IV2TEC,QAAS,WACPnF,KUzTJqC,QV2TE+C,QAAS,WACPC,SAASC,UAAYtF,KUzTzBuF,WV4TE3C,SACEP,KAAM,WACJrC,KAAKkF,QU1TX,EV2TMlF,KAAK2B,QACL,KAAK,GAAI6D,GAAI,EAAGA,EAAI,EAAGA,IU1T7B,CV2TQxF,KAAK2B,MAAM8D,QACX,KAAK,GAAIC,GAAI,EAAGA,EAAI,EAAGA,IACrB1F,KAAK2B,MAAM6D,GAAGC,KAAK,GAAIR,GAAwD,EAAE,GAAKnF,EAAG0F,EAAGzF,EU1TtG2F,KV2TU1F,KAAK2F,KAAK3F,KAAK2B,MAAO6D,EAAGxF,KAAK2B,MU1TxC6D,IV6TMxF,KU1TN4F,kBV4TIA,eAAgB,WAEd,IAAK,GADDC,MACKC,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,GAAIC,GAAI,EAAGA,EAAI,EAAGA,IACU,IAA3B/F,KAAK2B,MAAMmE,GAAGC,GAAGtG,OACnBoG,EAAMJ,MAAOK,EAAGA,EAAGC,EU1T/BA,GV8TM,IAAIF,EAAMlG,OAAS,EU1TzB,CV2TQ,GAAIqG,GAAcC,KAAKC,MAAMD,KAAKE,SAAWN,EU1TrDlG,QV2TYyG,EAAcH,KAAKE,SAAW,GAAM,EU1ThD,EV2TYE,EAAKR,EAAMG,GU1TvBF,EV2TY5E,EAAK2E,EAAMG,GU1TvBD,CV4TQ/F,MAAK2B,MAAM0E,GAAInF,GAAIzB,MU1T3B2G,EV2TQpG,KAAK2B,MAAM0E,GAAInF,GAAIjB,OU1T3B,EV2TQD,KAAK2F,KAAK3F,KAAK2B,MAAO0E,EAAIrG,KAAK2B,MU1TvC0E,MV6TId,UAAW,SAAmBe,GAExBA,EAAMC,SAAW,IAAMD,EAAMC,SAAW,IAC1CvG,KAAKwG,KAAKF,EAAMC,QU1TxB,KV6TIE,aAAc,WACZ,IAAK,GAAIX,GAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,GAAIC,GAAI,EAAGA,EAAI,EAAGA,IACrB/F,KAAK2B,MAAMmE,GAAGC,GAAGW,cAAe5G,EAAGgG,EAAG/F,EU1ThDgG,KV6UIY,WAAY,SAAoBC,GAI9B,IAAK,GAHDC,GAAOD,EU3TjBjH,OV4TUmH,EAAUF,EAAO,GU3T3BjH,OV4TUoH,KACKC,EAAM,EAAGA,EAAMH,EAAMG,IU3TpC,CV4TQD,EAAItB,QACJ,KAAK,GAAIwB,GAAS,EAAGA,EAASH,EAASG,IACrCF,EAAIC,GAAKC,GAAUL,EAAOK,GAAQH,EAAUE,EAAM,GAGtD,MU3TND,IVoUIP,KAAM,SAAcU,GAClB,GAAkB,IAAdA,EACFlH,KU5TRmH,eACA,CV6TQ,IAAK,GAAI3B,GAAI,EAAGA,EAAI0B,EAAW1B,IAC7BxF,KAAK2B,MAAQ3B,KAAK2G,WAAW3G,KU5TvC2B,MV8TQ3B,MU5TRmH,UV6TQ,KAAK,GAAIC,GAAK,EAAGA,EAAK,EAAIF,EAAWE,IACnCpH,KAAK2B,MAAQ3B,KAAK2G,WAAW3G,KU5TvC2B,OV+TM3B,KU5TNyG,cV6TM,KAAK,GAAIY,GAAM,EAAGA,EAAM,EAAGA,IACzBrH,KAAK2F,KAAK3F,KAAK2B,MAAO0F,EAAKrH,KAAK2B,MU5TxC0F,GV+TMrH,MU5TN4F,iBV6TU5F,KAAKsH,aACPtH,KAAKkF,QU5Tb,IVwUIiC,SAAU,WACR,IAAK,GAAIrB,GAAI,EAAGA,EAAI,EAAGA,IU7T7B,CVkUQ,IAJA,GAAIkB,GAAMhH,KAAK2B,MAAMmE,GAAGyB,OAAO,SAAU3F,GACvC,MU9TV,KV8TiBA,EAAKnC,QAEV+H,KACGR,EAAIrH,OAAS,GU/T5B,CVgUU,GAAI8H,GAAOT,EU/TrBU,OVgUcV,GAAIrH,OAAS,GAAK8H,EAAKhI,QAAUuH,EAAI,GAAGvH,QAC1CgI,EAAKhI,OAASuH,EAAIU,QAAQjI,OU/TtC,GViUU+H,EAAO/B,KU/TjBgC,GViUQ,GAAID,EAAO7H,OAAS,EAClB,IAAK,GAAIgI,GAAWH,EAAO7H,OAAQgI,EAAW,EAAGA,IAC/CH,EAAO/B,KAAK,GU/TxBR,GAAA,EVkUQjF,MAAK2B,MAAMmE,GU/TnB0B,IVyUIF,SAAU,WAKR,IAAK,GAJDM,IUhUV,EVkUU9H,IAAM,EAAG,EAAG,EUhUtB,GViUUC,GAAK,EAAG,GAAI,EUhUtB,GViUe+F,EAAI,EAAGA,EAAI,KAElB8B,GUhUR,IVgUkB5H,KAAK2B,MAAMmE,GAAGyB,OAAO,SAAU3F,GACvC,MAAsB,KAAfA,EAAKnC,QACXE,QAJkBmG,IASrB,IAAK,GAAIC,GAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,GAAI8B,GAAS,EAAGA,EAAS,EAAGA,IUnU3C,CVoUY,GAAIC,GAAUhC,EAAIhG,EUnU9B+H,GVoUgBE,EAAUhC,EAAIhG,EUnU9B8H,EVqUgBC,IAAW,GAAKC,GAAW,GAAKD,EAAU,GAAKC,EAAU,IAC3DH,GAAU5H,KAAK2B,MAAMmE,GAAGC,GAAGtG,QAAUO,KAAK2B,MAAMmG,GAASC,GUnUvEtI,OVwUM,OUnUNmI,IVuUEvD,YUjUF2D,KAAAhD,EAAA,KVwUMiD,KACA,SAAUjJ,EAAQC,EAAqBC,GAE7C,YACqB,IAAIgJ,GAAgDhJ,EAAoB,OWpgB7FD,GAAA,GX+gBE8C,KW7gBF,MX8gBEsC,YW3gBF8D,IAAAD,EAAA,OXkhBG","file":"static/js/app.0d53ffec5b83c39c3194.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/kt0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n\n\n\n/**\n * Created by feng on 17-11-6.\n */\nvar _class = function () {\n  function _class() {\n    var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var coord = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { x: 0, y: 0 };\n\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, _class);\n\n    this.value = value; // 当前显示的值\n    this.coord = { // 当前的坐标值\n      x: coord.x,\n      y: coord.y // 动画过渡 translate\n    };this.isNew = false; // 判断是不是新格子 新格子应该有 scale 动画\n    this.oldCoord = { x: this.coord.x, y: this.coord.y };\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(_class, [{\n    key: \"refreshCoord\",\n    value: function refreshCoord(newCoord) {\n      this.isNew = false;\n      this.oldCoord.x = this.coord.x;\n      this.oldCoord.y = this.coord.y;\n      this.coord.x = newCoord.x;\n      this.coord.y = newCoord.y;\n    }\n  }]);\n\n  return _class;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (_class);\n\n/***/ }),\n\n/***/ \"3GDu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__ = __webpack_require__(\"fGNU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3365b6d6_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__ = __webpack_require__(\"6TGB\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"U2ii\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3365b6d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Map_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3365b6d6_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Map_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"6QSp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"6TGB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_vm._l((_vm.tiles[0]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[1]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[2]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[3]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOver),expression:\"isOver\"}],staticClass:\"gameover\"},[_c('div',{staticClass:\"again\"},[_c('p',{staticClass:\"show-over\"},[_vm._v(\"GAME OVER\")]),_vm._v(\" \"),_c('button',{staticClass:\"try-again\",on:{\"click\":function($event){_vm.init()}}},[_vm._v(\"Try Again\")])])])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"8Wsr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {};\n  },\n\n  props: {\n    tile: {\n      type: Object,\n      required: true\n    }\n  },\n  methods: {\n    getBackgroudColor: function getBackgroudColor(number) {\n      switch (number) {\n        case 0:\n          return 'rgba(238, 228, 218, 0.35)';\n        case 2:\n          return '#eee4da';\n        case 4:\n          return '#ede0c8';\n        case 8:\n          return '#f2b179';\n        case 16:\n          return '#f59563';\n        case 32:\n          return '#f67c5f';\n        case 64:\n          return '#f65e3b';\n        case 128:\n          return '#edcf72';\n        case 256:\n          return '#edcc61';\n        case 512:\n          return '#edc850';\n        case 1024:\n          return '#edc53f';\n        case 2048:\n          return '#edc22e';\n      }\n    }\n  },\n  computed: {\n    position: function position() {\n      return {\n        top: this.tile.coord.x * 100 + (this.tile.coord.x + 1) * 10 + 'px',\n        left: this.tile.coord.y * 100 + (this.tile.coord.y + 1) * 10 + 'px',\n        background: this.getBackgroudColor(this.tile.value)\n      };\n    }\n  },\n  watch: {\n    //      coord: function (val, oldVal) {\n    //        console.log(`newVal is ${val.y}, oldVal is ${oldVal.y}`)\n    //        this.oldCoord.x = oldVal.x\n    //        this.oldCoord.y = oldVal.y\n    //        console.log(`new.x:${val.x} new.y:${val.y}`)\n    //        console.log(`old.x:${oldVal.x} old.y:${oldVal.y}`)\n    //      }\n  }\n});\n\n/***/ }),\n\n/***/ \"B1Az\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__ = __webpack_require__(\"8Wsr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0ad82b50_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__ = __webpack_require__(\"X4Vl\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"GeGc\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0ad82b50\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Cell_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0ad82b50_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Cell_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"GeGc\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_8a4d6004_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"6QSp\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"dvRs\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_8a4d6004_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */] }\n});\n\n/***/ }),\n\n/***/ \"U2ii\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"X4Vl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cell\",class:{'new-tile': _vm.tile.isNew},style:(_vm.position)},[(_vm.tile.value != 0)?_c('span',[_vm._v(_vm._s(_vm.tile.value))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"dvRs\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"fGNU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Cell_vue__ = __webpack_require__(\"B1Az\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Tile_js__ = __webpack_require__(\"/kt0\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      tiles: [],\n      isOver: false\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  mounted: function mounted() {\n    document.onkeydown = this.onKeyDown;\n  },\n\n  methods: {\n    init: function init() {\n      this.isOver = false;\n      this.tiles = [];\n      for (var i = 0; i < 4; i++) {\n        this.tiles.push([]);\n        for (var j = 0; j < 4; j++) {\n          this.tiles[i].push(new __WEBPACK_IMPORTED_MODULE_1__Tile_js__[\"a\" /* default */](0, { x: i, y: j }));\n          this.$set(this.tiles, i, this.tiles[i]);\n        }\n      }\n      this.generateRandom();\n    },\n    generateRandom: function generateRandom() {\n      var space = [];\n      for (var r = 0; r < 4; r++) {\n        for (var c = 0; c < 4; c++) {\n          if (this.tiles[r][c].value === 0) {\n            space.push({ r: r, c: c });\n          }\n        }\n      }\n      if (space.length > 0) {\n        var randomIndex = Math.floor(Math.random() * space.length);\n        var randomValue = Math.random() > 0.5 ? 2 : 4;\n        var _r = space[randomIndex].r;\n        var _c = space[randomIndex].c;\n        /* 二维数组的更新方式只能是更新整个一维数组 */\n        this.tiles[_r][_c].value = randomValue;\n        this.tiles[_r][_c].isNew = true;\n        this.$set(this.tiles, _r, this.tiles[_r]);\n      }\n    },\n    onKeyDown: function onKeyDown(event) {\n      /** keyCode 37 == Left  38 == Up 39 == Right 40 == Down */\n      if (event.keyCode >= 37 && event.keyCode <= 40) {\n        this.move(event.keyCode - 37);\n      }\n    },\n    refreshTiles: function refreshTiles() {\n      for (var r = 0; r < 4; r++) {\n        for (var c = 0; c < 4; c++) {\n          this.tiles[r][c].refreshCoord({ x: r, y: c });\n        }\n      }\n    },\n\n    /**\n     * rotate 逆时针旋转 纯粹数学规律\n     * n维矩阵旋转,假设矩阵中一数字坐标为(i,j)，逆时针翻转后的坐标为(n-1-j,i)\n     * 原矩阵\n     * (0,0) (0,1) (0,2) (0,3)\n     * (1,0) (1,1) (1,2) (1,3)\n     * (2,0) (2,1) (2,2) (2,3)\n     * (3,0) (3,1) (3,2) (3,3)\n     * 逆时针旋转90度后坐标变化\n     * (0,3) (1,3) (2,3) (3,3)\n     * (0,2) (1,2) (2,2) (3,2)\n     * (0,1) (1,1) (2,1) (3,1)\n     * (0,0) (1,0) (2,0) (3,0)\n     */\n    rotateLeft: function rotateLeft(matrix) {\n      var rows = matrix.length;\n      var columns = matrix[0].length;\n      var res = [];\n      for (var row = 0; row < rows; row++) {\n        res.push([]);\n        for (var column = 0; column < columns; column++) {\n          res[row][column] = matrix[column][columns - row - 1]; // 计算变化后的坐标\n        }\n      }\n      return res;\n    },\n\n    /** 游戏移动实现规则:\n     * 先将地图向左旋转,\n     * 然后进行合并操作,\n     * 再旋转回来,\n     * 生成新的单元格\n     * */\n    move: function move(direction) {\n      if (direction === 0) {\n        this.moveLeft();\n      } else {\n        for (var i = 0; i < direction; i++) {\n          this.tiles = this.rotateLeft(this.tiles);\n        }\n        this.moveLeft();\n        for (var _i = 0; _i < 4 - direction; _i++) {\n          this.tiles = this.rotateLeft(this.tiles);\n        }\n      }\n      this.refreshTiles();\n      for (var _i2 = 0; _i2 < 4; _i2++) {\n        this.$set(this.tiles, _i2, this.tiles[_i2]);\n      }\n      // TODO 这里的逻辑有问题,应该是有移动格子时候才需要生成新格子\n      this.generateRandom();\n      if (this.isDefeat()) {\n        this.isOver = true;\n      }\n    },\n\n    /**\n     * 向左移动游戏规则:\n     * 清除所有的空白格子后,\n     * 当左边的格子等于右边的格子,\n     * 合并,\n     * 最后当剩下的有数字的格子都操作完毕后,\n     * 填充补足4个单元格,\n     * */\n    moveLeft: function moveLeft() {\n      for (var r = 0; r < 4; r++) {\n        var row = this.tiles[r].filter(function (tile) {\n          return tile.value !== 0;\n        });\n        var newRow = [];\n        while (row.length > 0) {\n          var cell = row.shift();\n          if (row.length > 0 && cell.value === row[0].value) {\n            cell.value += row.shift().value || 0;\n          }\n          newRow.push(cell);\n        }\n        if (newRow.length < 4) {\n          for (var currentY = newRow.length; currentY < 4; currentY++) {\n            newRow.push(new __WEBPACK_IMPORTED_MODULE_1__Tile_js__[\"a\" /* default */]());\n          }\n        }\n        this.tiles[r] = newRow;\n      }\n    },\n\n    /**\n     * 判断是否失败的规则,\n     * 假如还有空白格子,\n     * 或者xx格子的数值和周围上 下 左 右的格子值相等,\n     * 则还没有输\n     */\n    isDefeat: function isDefeat() {\n      var defeat = false;\n      // 上 下 左 右\n      var x = [-1, 1, 0, 0];\n      var y = [0, 0, -1, 1];\n      for (var r = 0; r < 4; r++) {\n        // 用 |= 的好处: 这里只需要满足以上任意规则则游戏没有输, 因此当任意规则为true, 则defeat一直为true\n        defeat |= this.tiles[r].filter(function (tile) {\n          return tile.value !== 0;\n        }).length !== 4;\n        if (defeat) {\n          // 如果当前行去掉空格子后不为4个格子,则说明有空格\n          break;\n        }\n        for (var c = 0; c < 4; c++) {\n          for (var direct = 0; direct < 4; direct++) {\n            var aroundX = r + x[direct];\n            var aroundY = c + y[direct];\n            // 判断当前this.tiles[r+x[direct]][c+[direct]]的格子存在\n            if (aroundX >= 0 && aroundY >= 0 && aroundX < 4 && aroundY < 4) {\n              defeat |= this.tiles[r][c].value === this.tiles[aroundX][aroundY].value;\n            }\n          }\n        }\n      }\n      return !defeat;\n    }\n  },\n\n  components: {\n    Cell: __WEBPACK_IMPORTED_MODULE_0__Cell_vue__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Map__ = __webpack_require__(\"3GDu\");\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app',\n  components: {\n    Map: __WEBPACK_IMPORTED_MODULE_0__components_Map__[\"a\" /* default */]\n  }\n});\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0d53ffec5b83c39c3194.js","/**\n * Created by feng on 17-11-6.\n */\nexport default class {\n  constructor (value = 0, coord = {x: 0, y: 0}) {\n    this.value = value// 当前显示的值\n    this.coord = {// 当前的坐标值\n      x: coord.x,\n      y: coord.y\n    } // 动画过渡 translate\n    this.isNew = false // 判断是不是新格子 新格子应该有 scale 动画\n    this.oldCoord = {x: this.coord.x, y: this.coord.y}\n  }\n\n  refreshCoord (newCoord) {\n    this.isNew = false\n    this.oldCoord.x = this.coord.x\n    this.oldCoord.y = this.coord.y\n    this.coord.x = newCoord.x\n    this.coord.y = newCoord.y\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tile.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3365b6d6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Map.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3365b6d6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Map.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3365b6d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Map.vue\n// module id = 3GDu\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8a4d6004\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 6QSp\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"},[_vm._l((_vm.tiles[0]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[1]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[2]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_vm._l((_vm.tiles[3]),function(tile){return _c('cell',{attrs:{\"tile\":tile}})}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOver),expression:\"isOver\"}],staticClass:\"gameover\"},[_c('div',{staticClass:\"again\"},[_c('p',{staticClass:\"show-over\"},[_vm._v(\"GAME OVER\")]),_vm._v(\" \"),_c('button',{staticClass:\"try-again\",on:{\"click\":function($event){_vm.init()}}},[_vm._v(\"Try Again\")])])])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3365b6d6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Map.vue\n// module id = 6TGB\n// module chunks = 1","<template>\n  <div class=\"cell\" v-bind:class=\"{'new-tile': tile.isNew}\" v-bind:style=\"position\">\n    <span v-if=\"tile.value != 0\">{{ tile.value }}</span>\n  </div>\n</template>\n\n<script>\n  export default{\n    data () {\n      return {\n      }\n    },\n    props: {\n      tile: {\n        type: Object,\n        required: true\n      }\n    },\n    methods: {\n      getBackgroudColor (number) {\n        switch (number) {\n          case 0:return 'rgba(238, 228, 218, 0.35)'\n          case 2:return '#eee4da'\n          case 4:return '#ede0c8'\n          case 8:return '#f2b179'\n          case 16:return '#f59563'\n          case 32:return '#f67c5f'\n          case 64:return '#f65e3b'\n          case 128:return '#edcf72'\n          case 256:return '#edcc61'\n          case 512:return '#edc850'\n          case 1024:return '#edc53f'\n          case 2048:return '#edc22e'\n        }\n      }\n    },\n    computed: {\n      position: function () {\n        return {\n          top: this.tile.coord.x * 100 + (this.tile.coord.x + 1) * 10 + 'px',\n          left: this.tile.coord.y * 100 + (this.tile.coord.y + 1) * 10 + 'px',\n          background: this.getBackgroudColor(this.tile.value)\n        }\n      }\n    },\n    watch: {\n//      coord: function (val, oldVal) {\n//        console.log(`newVal is ${val.y}, oldVal is ${oldVal.y}`)\n//        this.oldCoord.x = oldVal.x\n//        this.oldCoord.y = oldVal.y\n//        console.log(`new.x:${val.x} new.y:${val.y}`)\n//        console.log(`old.x:${oldVal.x} old.y:${oldVal.y}`)\n//      }\n    }\n  }\n</script>\n\n\n<style scoped>\n  .cell {\n    transition: 100ms ease-in;\n    font-size: 30px;\n    position: absolute;\n    text-align: center;\n    display: inline-block;\n    line-height: 100px;\n    width: 100px;\n    height: 100px;\n    border-radius: 10px;\n    color: #49390d;\n    /*margin: 5px;*/\n  }\n  .new-tile {\n    animation-duration: 200ms;\n    animation-name: emerge;\n    animation-delay: 100ms;\n  }\n  @keyframes emerge {\n    from{transform: scale(0.4)}\n    to{transform: scale(1)}\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Cell.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0ad82b50\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cell.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cell.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ad82b50\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cell.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0ad82b50\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Cell.vue\n// module id = B1Az\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8a4d6004\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8a4d6004\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cell\",class:{'new-tile': _vm.tile.isNew},style:(_vm.position)},[(_vm.tile.value != 0)?_c('span',[_vm._v(_vm._s(_vm.tile.value))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ad82b50\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Cell.vue\n// module id = X4Vl\n// module chunks = 1","<template>\n  <div class=\"map\">\n    <cell :tile=\"tile\" v-for=\"tile in tiles[0]\"></cell>\n    <cell :tile=\"tile\" v-for=\"tile in tiles[1]\"></cell>\n    <cell :tile=\"tile\" v-for=\"tile in tiles[2]\"></cell>\n    <cell :tile=\"tile\" v-for=\"tile in tiles[3]\"></cell>\n    <div class=\"gameover\" v-show=\"isOver\">\n      <div class=\"again\">\n        <p class=\"show-over\">GAME OVER</p>\n        <button v-on:click=\"init()\" class=\"try-again\">Try Again</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Cell from './Cell.vue'\n  import Tile from '../Tile.js'\n  export default{\n    data () {\n      return {\n        tiles: [],\n        isOver: false\n      }\n    },\n    created () {\n      this.init()\n    },\n    mounted () {\n      document.onkeydown = this.onKeyDown\n    },\n    methods: {\n      init () {\n        this.isOver = false\n        this.tiles = []\n        for (let i = 0; i < 4; i++) {\n          this.tiles.push([])\n          for (let j = 0; j < 4; j++) {\n            this.tiles[i].push(new Tile(0, {x: i, y: j}))\n            this.$set(this.tiles, i, this.tiles[i])\n          }\n        }\n        this.generateRandom()\n      },\n      generateRandom () {\n        let space = []\n        for (let r = 0; r < 4; r++) {\n          for (let c = 0; c < 4; c++) {\n            if (this.tiles[r][c].value === 0) {\n              space.push({r: r, c: c})\n            }\n          }\n        }\n        if (space.length > 0) {\n          let randomIndex = Math.floor(Math.random() * space.length)\n          let randomValue = Math.random() > 0.5 ? 2 : 4\n          let r = space[randomIndex].r\n          let c = space[randomIndex].c\n          /* 二维数组的更新方式只能是更新整个一维数组 */\n          this.tiles[r][c].value = randomValue\n          this.tiles[r][c].isNew = true\n          this.$set(this.tiles, r, this.tiles[r])\n        }\n      },\n      onKeyDown (event) {\n        /** keyCode 37 == Left  38 == Up 39 == Right 40 == Down */\n        if (event.keyCode >= 37 && event.keyCode <= 40) {\n          this.move(event.keyCode - 37)\n        }\n      },\n      refreshTiles () {\n        for (let r = 0; r < 4; r++) {\n          for (let c = 0; c < 4; c++) {\n            this.tiles[r][c].refreshCoord({x: r, y: c})\n          }\n        }\n      },\n      /**\n       * rotate 逆时针旋转 纯粹数学规律\n       * n维矩阵旋转,假设矩阵中一数字坐标为(i,j)，逆时针翻转后的坐标为(n-1-j,i)\n       * 原矩阵\n       * (0,0) (0,1) (0,2) (0,3)\n       * (1,0) (1,1) (1,2) (1,3)\n       * (2,0) (2,1) (2,2) (2,3)\n       * (3,0) (3,1) (3,2) (3,3)\n       * 逆时针旋转90度后坐标变化\n       * (0,3) (1,3) (2,3) (3,3)\n       * (0,2) (1,2) (2,2) (3,2)\n       * (0,1) (1,1) (2,1) (3,1)\n       * (0,0) (1,0) (2,0) (3,0)\n       */\n      rotateLeft (matrix) {\n        let rows = matrix.length\n        let columns = matrix[0].length\n        let res = []\n        for (let row = 0; row < rows; row++) {\n          res.push([])\n          for (let column = 0; column < columns; column++) {\n            res[row][column] = matrix[column][columns - row - 1]// 计算变化后的坐标\n          }\n        }\n        return res\n      },\n      /** 游戏移动实现规则:\n       * 先将地图向左旋转,\n       * 然后进行合并操作,\n       * 再旋转回来,\n       * 生成新的单元格\n       * */\n      move (direction) {\n        if (direction === 0) {\n          this.moveLeft()\n        } else {\n          for (let i = 0; i < direction; i++) {\n            this.tiles = this.rotateLeft(this.tiles)\n          }\n          this.moveLeft()\n          for (let i = 0; i < 4 - direction; i++) {\n            this.tiles = this.rotateLeft(this.tiles)\n          }\n        }\n        this.refreshTiles()\n        for (let i = 0; i < 4; i++) {\n          this.$set(this.tiles, i, this.tiles[i])\n        }\n        // TODO 这里的逻辑有问题,应该是有移动格子时候才需要生成新格子\n        this.generateRandom()\n        if (this.isDefeat()) {\n          this.isOver = true\n        }\n      },\n      /**\n       * 向左移动游戏规则:\n       * 清除所有的空白格子后,\n       * 当左边的格子等于右边的格子,\n       * 合并,\n       * 最后当剩下的有数字的格子都操作完毕后,\n       * 填充补足4个单元格,\n       * */\n      moveLeft () {\n        for (let r = 0; r < 4; r++) {\n          let row = this.tiles[r].filter(tile => (tile.value !== 0))\n          let newRow = []\n          while (row.length > 0) {\n            let cell = row.shift()\n            if (row.length > 0 && cell.value === row[0].value) {\n              cell.value += row.shift().value || 0\n            }\n            newRow.push(cell)\n          }\n          if (newRow.length < 4) {\n            for (let currentY = newRow.length; currentY < 4; currentY++) {\n              newRow.push(new Tile())\n            }\n          }\n          this.tiles[r] = newRow\n        }\n      },\n      /**\n       * 判断是否失败的规则,\n       * 假如还有空白格子,\n       * 或者xx格子的数值和周围上 下 左 右的格子值相等,\n       * 则还没有输\n       */\n      isDefeat () {\n        let defeat = false\n        // 上 下 左 右\n        let x = [-1, 1, 0, 0]\n        let y = [0, 0, -1, 1]\n        for (let r = 0; r < 4; r++) {\n          // 用 |= 的好处: 这里只需要满足以上任意规则则游戏没有输, 因此当任意规则为true, 则defeat一直为true\n          defeat |= (this.tiles[r].filter(tile => tile.value !== 0).length !== 4)\n          if (defeat) { // 如果当前行去掉空格子后不为4个格子,则说明有空格\n            break\n          }\n          for (let c = 0; c < 4; c++) {\n            for (let direct = 0; direct < 4; direct++) {\n              let aroundX = r + x[direct]\n              let aroundY = c + y[direct]\n              // 判断当前this.tiles[r+x[direct]][c+[direct]]的格子存在\n              if (aroundX >= 0 && aroundY >= 0 && aroundX < 4 && aroundY < 4) {\n                defeat |= (this.tiles[r][c].value === this.tiles[aroundX][aroundY].value)\n              }\n            }\n          }\n        }\n        return !defeat\n      }\n    },\n\n    components: {\n      Cell\n    }\n  }\n</script>\n\n<style scoped>\n  .map {\n    /**  div居中,\n    * 当设置width一定,margin 为 auto,\n    * 减去 top left right botton的值后,\n    * 剩下的的边距自动作为两边的左右边距,上下边距,\n    * 并且此时div的父元素是body,所以是全局居中\n    */\n    position: absolute;\n    margin: auto;\n    top: 0; left: 0; right: 0; bottom: 0;\n\n    /*弹性盒子的方式居中*/\n    /*display: flex;*/\n    /*justify-content: center;*/\n\n    width: 450px;\n    height: 450px;\n    background-color: #baa;\n    border-radius: 20px;\n  }\n  .gameover {\n    position: relative;\n    width: 450px;\n    height: 450px;\n    background-color: rgba(0, 191, 255, 0.4);\n    border-radius: 20px;\n  }\n  .again {\n    position: absolute;\n    margin: auto;\n    top: 0; left: 0; right: 0; bottom: 0;\n    width: auto;\n    height: 200px;\n    display: inline-block;\n    text-align: center;\n  }\n  .show-over {\n    font-size: 36px;\n    color: coral;\n    font-weight: bold;\n  }\n  .try-again {\n    font-size: 20px;\n    border-radius: 5px;\n    background-color: #876;\n    color: white;\n    border: 0;\n    width: 200px;\n    height: 50px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Map.vue","<template>\n  <div id=\"app\">\n    <Map/>\n  </div>\n</template>\n\n<script>\nimport Map from './components/Map'\n\nexport default {\n  name: 'app',\n  components: {\n    Map\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  /*margin-top: 60px;*/\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}